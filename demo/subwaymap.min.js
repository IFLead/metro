angular.module("dvhbSubwayMap",[]),function(t){"use strict";function n(){function n(n,i,e,a,o){function s(n){var i=d[n];return t.isDefined(i)?i:{}}function r(){l.resolve(),t.forEach(c,function(t){d[t]=d[t]||{},d[t].isDisabled=n.stations?!u(n.stations,t):!0})}function u(n,i){return t.isArray(n)?-1!=n.indexOf(i):t.isObject(n)?t.isDefined(n[i]):!1}var c,l,l=o.defer(),f=this,d={};c=e[0].querySelectorAll("[subway-station-name]"),c=[].map.call(c,function(t){return t.attributes["subway-station-name"].nodeValue}),r(),f.onSelectStation=function(t,i){n.onSelect(t,i)},f.findStation=s,n.$watch("stations",r,!0)}function i(t,n){n.css("position","relative")}return n.$inject=["$scope","$http","$element","$attrs","$q"],{restrict:"AE",replace:!1,transclude:!0,controller:n,controllerAs:"subwayMap",link:i,templateUrl:function(t,n){return n.mapUrl||"./metro.svg"},scope:{stations:"=?",onSelect:"=?"}}}t.module("dvhbSubwayMap").directive("subwayMap",n)}(angular),function(t){"use strict";function n(){function t(t,n,i,e){function a(){r=i.subwayStationName,n.bind("click",s);var e=u.findStation(r);e&&(t.data=e,c&&c.registerStation(r,e),t.$watch("data.isDisabled",function(t){n.toggleClass("disabled",t)}))}function o(){for(var t,i,e=n.find("circle"),a=e.length-1;a>=0;a--)if(e.eq(a).hasClass("subway-point")){t=e[a],i=t.getBoundingClientRect();break}return i?$(t).position():null}function s(){t.data.isDisabled||u.onSelectStation([r],o()),!t.data.isDisabled&&u.multiple&&(t.data.isActive=!t.data.isActive)}var r,u=e[1],c=e[0];a()}return{require:["?^subwayStationGroup","^subwayMap"],restrict:"A",link:t,scope:{}}}t.module("dvhbSubwayMap").directive("subwayStationName",n)}(angular),function(t){"use strict";function n(){function n(t){t.stations={},t.main="",this.registerStation=function(n,i){t.stations[n]=i,t.main=n}}function i(n,i,e,a){function o(){var i=!0;return t.forEach(n.stations,function(t){t.isDisabled===!1&&(i=!1)}),i}n.$watch(o,function(t){i.toggleClass("disabled",t)}),i.find("text").bind("click",function(t){var i=[];if(!o()){for(var e in n.stations)e.isDisabled||i.push(e);var s=$(t.target).position();a.onSelectStation(i,s)}})}return n.$inject=["$scope","$element"],{restrict:"A",link:i,require:"^subwayMap",controller:n,replace:!1,scope:{}}}t.module("dvhbSubwayMap").directive("subwayStationGroup",n)}(angular);